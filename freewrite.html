<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1200, initial-scale=1">
    <title>IMAGINX | THE LIVE LEDGER // ROMAN LAW</title>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;500;700&family=Crimson+Pro:italic,wght@400;600&family=IM+Fell+English+SC&display=swap" rel="stylesheet">
    <style>
        :root { --noir-black: #050505; --parchment: #e8dfd1; --ink-blue: #1a2a3a; --warm-amber: #ffbf00; }
        body { min-width: 1200px; background: var(--noir-black); color: white; font-family: 'Space Grotesk', sans-serif; margin: 0; padding: 0; }
        
        .ledger-container { max-width: 900px; margin: 60px auto; background: var(--parchment); padding: 80px; box-shadow: 0 0 100px rgba(0,0,0,1); min-height: 400px; position: relative; border: 1px solid #d4c4a8; }
        .ledger-header { font-family: 'IM Fell English SC', serif; color: var(--ink-blue); text-align: center; border-bottom: 2px solid rgba(26, 42, 58, 0.1); padding-bottom: 20px; margin-bottom: 40px; letter-spacing: 8px; text-transform: uppercase; }

        .scribe-area { width: 100%; background: transparent; border: none; color: var(--ink-blue); font-family: 'Crimson Pro', serif; font-size: 22px; line-height: 1.8; outline: none; resize: none; min-height: 250px; }
        
        /* THE LIVE FEED SECTION */
        .archive-container { max-width: 900px; margin: 0 auto 100px; padding: 40px; border-top: 1px solid rgba(255,255,255,0.1); }
        .archive-header { font-family: 'Syncopate'; font-size: 10px; color: var(--warm-amber); letter-spacing: 5px; margin-bottom: 30px; text-align: center; opacity: 0.6; }
        .story-entry { background: rgba(232, 223, 209, 0.05); border-left: 2px solid var(--warm-amber); padding: 25px; margin-bottom: 20px; font-family: 'Crimson Pro'; font-style: italic; font-size: 18px; color: #aaa; line-height: 1.6; }
        .entry-meta { font-family: 'Space Grotesk'; font-size: 9px; color: var(--warm-amber); margin-top: 10px; letter-spacing: 2px; text-transform: uppercase; }

        .btn-commit { position: sticky; bottom: 40px; left: 50%; transform: translateX(-50%); padding: 20px 60px; background: rgba(0,0,0,0.8); border: 1px solid var(--warm-amber); color: var(--warm-amber); font-family: 'Space Grotesk'; font-size: 10px; letter-spacing: 5px; cursor: pointer; transition: 0.4s; backdrop-filter: blur(10px); z-index: 1000; }
        .btn-commit:hover { background: var(--warm-amber); color: #000; box-shadow: 0 0 40px var(--warm-amber); }
        .btn-back { position: fixed; top: 40px; left: 40px; color: #555; text-decoration: none; font-size: 10px; letter-spacing: 3px; text-transform: uppercase; z-index: 1000; }
    </style>
</head>
<body>

    <a href="index.html" class="btn-back">[ RETURN_TO_STUDIO ]</a>

    <div class="ledger-container">
        <h1 class="ledger-header">The Free Writing Ledger</h1>
        <textarea id="freeInput" class="scribe-area" placeholder="The rain in Chicago never stops. Scribe your story here..."></textarea>
    </div>

    <button class="btn-commit" onclick="commitToRegistry()">COMMIT_TO_LEDGER</button>

    <div class="archive-container">
        <div class="archive-header">SCROLL_OF_THE_SHADOWS // RECENT_SIGNALS</div>
        <div id="liveArchive">
            <!-- DYNAMIC ENTRIES WILL APPEAR HERE -->
        </div>
    </div>

    <script>
        // LOAD EXISTING STORIES ON START
        window.onload = loadArchive;

        async function commitToRegistry() {
            const text = document.getElementById('freeInput').value;
            if(!text) return;

            // 1. PUSH TO DISCORD (OPTIONAL WEBHOOK LOGIC)
            // You can replace the URL below with your actual Discord Webhook URL
            const discordWebhook = "https://discord.gg/gzDjwKaP"; 
            if(discordWebhook !== "https://discord.gg/gzDjwKaP") {
                fetch(discordWebhook, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ content: `ðŸ“œ **NEW SIGNAL IN THE LEDGER:**\n\n"${text}"\n\n*â€” Scribed at Roman Law Studios*` })
                });
            }

            // 2. SAVE TO LOCAL STORAGE (FOR PERSISTENCE ON THIS DEVICE)
            const signal = { text: text, time: new Date().toLocaleString() };
            let history = JSON.parse(localStorage.getItem('roman_ledger') || "[]");
            history.unshift(signal);
            localStorage.setItem('roman_ledger', JSON.stringify(history));

            // 3. UI FEEDBACK
            document.getElementById('freeInput').value = "";
            alert("SIGNAL_LOCKED: Your ink has been shared with the city and the Discord dispatch.");
            loadArchive();
        }

        function loadArchive() {
            const container = document.getElementById('liveArchive');
            const history = JSON.parse(localStorage.getItem('roman_ledger') || "[]");
            container.innerHTML = history.map(entry => `
                <div class="story-entry">
                    "${entry.text}"
                    <div class="entry-meta">SCRIBED_AT: ${entry.time} // STATUS: LIVE_SIGNAL</div>
                </div>
            `).join('');
        }
    </script>
</body>
</html>
